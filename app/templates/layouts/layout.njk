{% import "macros/section.njk" as section %}
{% import "macros/form.njk" as form %}
{% import "macros/timer.njk" as timer %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Train for the Brain</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <script src="/scripts/google/webfontloader/webfontloader.js"></script>
  <script>
    WebFont.load({
      google: {
        families: ['Rubik:300,400,400i,500,700:latin']
      }
    });
  </script>

  <link rel="stylesheet" href="/styles/vendor/jquery/jquery-ui.min.css">
  <link rel="stylesheet" href="/scripts/vendor/pupunzi/dist/css/jquery.mb.YTPlayer.min.css">
  <link rel="stylesheet" href="/styles/main.css">
  <link rel="stylesheet" href="/styles/vendor/jquerysvg/jquery.svg.css">

  <script src="/scripts/jquery/jquery-3.2.1.js"></script>
  <script src="/scripts/jquery/jquery-ui.js"></script>
  <script src="/scripts/furf/jquery.ui.touch-punch.js"></script>
  <script src="/scripts/vast/jquery.popupoverlay.js"></script>
  <script src="/scripts/parsley/parsley.js"></script>
  <script src="/scripts/svgdotjs/svg.js"></script>
  <script src="https://player.vimeo.com/api/player.js"></script>
  <script src="https://cdn.anychart.com/js/latest/graphics.min.js"></script>
</head>

<body>

<div class="page-wrapper">
  {% include "includes/page-header.njk" %}

  <main id="page-content" role="main">
    {% block content %}{% endblock %}
  </main>

  {% include "includes/page-footer.njk" %}
</div>


{% include "includes/why-important.njk" %}
{% include "includes/why-exercise.njk" %}
{% include "includes/what-is-dementia.njk" %}
{% include "includes/ill-health.njk" %}
{% include "includes/ipaq.njk" %}
{% include "includes/exit-home.njk" %}
{% include "includes/exit-measures.njk" %}
{% include "includes/exit-dashboard.njk" %}
{% include "includes/contact-us.njk" %}
{% include "includes/my-data.njk" %}

<script src="/scripts/main.min.js"></script>
<script>
  jQuery.noConflict();

  (function($) {
    // // -------------------------------------------------------------------------
    // // Initialise timer icons
    // // -------------------------------------------------------------------------
    // var initTimerIcons = function(selector) {
    //   var icons = selector || '.timer-icon';

    //   $(icons).each(function(i) {
    //     $(this).attr('id', "timer-icon-" + i);
    //   });
    // }

    // // -------------------------------------------------------------------------
    // // Draw timer icons
    // // -------------------------------------------------------------------------
    // var drawTimerIcons = function(selector) {
    //   var icons = selector || '.timer-icon';

    //   $(icons).each(function() {
    //     var stageID = $(this).attr('id');
    //     var minutes = $(this).attr('data-duration') || 0;
    //     var stage = acgraph.create(stageID);
    //     var color = $(this).attr('data-color') || '#ccc1ba';
    //     var strokeWidth = 2

    //     console.log('Minutes = ' + minutes + ', Color = ' + color);

    //     var cr = 15;
    //     var cx = 18;
    //     var cy = 18;

    //     var pr = 11.5;
    //     var pa = minutes * 6;
    //     var px = cx;
    //     var py = cy;

    //     stage.circle(cx, cy, cr).stroke({color: color, thickness: strokeWidth});
    //     stage.path().moveTo(px, py).lineTo(px, py - pr).arcTo(pr, pr, 270, pa).lineTo(px, py).close().stroke({color: color, thickness: 1}).fill(color);
    //   });
    // }

    // // -------------------------------------------------------------------------
    // // Calculate total session times
    // // -------------------------------------------------------------------------
    // var sessionTotal = function() {
    //   var total = 0;

    //   $('#session-select').find('input:checked').each(function() {
    //     total = total + parseInt($(this).parent('.form-field').find('.timer-icon').attr('data-duration'));
    //   });

    //   return total;
    // };

    // // -------------------------------------------------------------------------
    // // Calculate initial session total and draw timer icons
    // // -------------------------------------------------------------------------
    // var $sessionTotal = $('#session-total');
    // var id = $sessionTotal.find('.timer-icon').attr('id');
    // var total = sessionTotal();
    // initTimerIcons('.timer-icon');
    // $sessionTotal.html(total +' mins <span id="' + id + '" class="timer-icon" data-duration="' + total + '" data-color=' + '"#1aab98"></span>');
    // drawTimerIcons('.timer-icon');

    // // -------------------------------------------------------------------------
    // // Update icons and session total on change
    // // -------------------------------------------------------------------------
    // $('#session-select').find('input[type=checkbox]').on('change', function() {
    //   var $this = $(this);
    //   var $timer = $(this).parent('.form-field').find('.timer-icon');
    //   var $circle = $timer.find('circle');
    //   var $path = $timer.find('path');
    //   var $sessionTotal = $('#session-total');
    //   var id = $sessionTotal.find('.timer-icon').attr('id');
    //   var total;

    //   if ($this.prop('checked')) {
    //     $circle.attr('stroke', '#1aab98');
    //     $path.attr('stroke', '#1aab98').attr('fill', '#1aab98');
    //   } else {
    //     $circle.attr('stroke', '#ccc2ba');
    //     $path.attr('stroke', '#ccc2ba').attr('fill', '#ccc2ba');
    //   }

    //   total = sessionTotal();
    //   $sessionTotal.html(total +' mins <span id="' + id + '" class="timer-icon" data-duration="' + total + '" data-color=' + '"#1aab98"></span>');
    //   drawTimerIcons('#session-total .timer-icon');
    // });

    // // -------------------------------------------------------------------------
    // // Handle responsive video
    // // -------------------------------------------------------------------------
    // var $videoFrames = $('#video-frame');

    // $videoFrames.each(function(i) {
    //   var $videoFrame = $(this);
    //   var $wrapper;
    //   var url = $videoFrame.attr('src');
    //   var players = /www.youtube.com|player.vimeo.com/;
    //   var videoRatio;

    //   if (url.search(players) > 0) {
    //     videoRatio = ($videoFrame.attr('height') / $videoFrame.attr('width')) * 100;

    //     $videoFrame
    //       .css({
    //         'position': 'absolute',
    //         'top': '0',
    //         'left': '0'
    //       })
    //       .attr('width', '100%')
    //       .attr('height', '100%');

    //     $videoFrame
    //       .parent('.video-wrapper')
    //       .css({
    //         'width': '100%',
    //         'position': 'relative',
    //         'padding-top': videoRatio + '%'
    //       });
    //   }
    // });

    // $('.video-start').click(function(){
    //   var $videoFrame = $('#video-frame');

    //   $videoFrame.attr('src', $videoFrame.attr('src')+'?autoplay=1');
    //   $(this).hide();
    // });

    // -------------------------------------------------------------------------
    // Handle form validation
    // -------------------------------------------------------------------------
    $('#t4tb').parsley()
      // Toggles .hidden and .disabled classes on error messages
      // and submit button if field validation has errors
      .on('field:validated', function() {
        var hasErrors = $('.parsley-error').length !== 0;

        if (hasErrors) {
          $('#form-errors').removeClass('hidden');
          $('#t4tb').find('button[type=submit]').prop('disabled', true);
        } else {
          $('#form-errors').addClass('hidden');
          $('#t4tb').find('button[type=submit]').prop('disabled', false);
        }
      });
  })(jQuery);
</script>
</body>
</html>
