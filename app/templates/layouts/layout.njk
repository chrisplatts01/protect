<!-- layout.nunjucks -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Train for the Brain</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <link href="https://fonts.googleapis.com/css?family=Rubik:300,400,400i,500,700" rel="stylesheet">

  <link rel="stylesheet" href="/styles/vendor/jquery/jquery-ui.min.css">
  <link rel="stylesheet" href="/styles/main.css">

  <script src="/scripts/vendor/jquery/jquery-3.2.1.js"></script>
  <script src="/scripts/vendor/jquery/jquery-ui.js"></script>
  <script src="/scripts/vendor/furf/jquery.ui.touch-punch.js"></script>
  <script src="/scripts/vendor/vast/jquery.popupoverlay.js"></script>
  <script src="/scripts/vendor/parsley/parsley.js"></script>
</head>
<body>

{% import "macros/section.njk" as section %}
{% import "macros/form.njk" as form %}
{# % import "macros/modal.njk" as modal % #}

{% include "includes/page-header.njk" %}

{% include "includes/form-errors.njk" %}

<main id="page-content" role="main">
  {% block content %}{% endblock %}
</main>

{% include "includes/page-footer.njk" %}

{% include "includes/my-data.njk" %}
{% include "includes/why-important.njk" %}
{% include "includes/why-exercise.njk" %}
{% include "includes/ill-health.njk" %}
{% include "includes/ipaq.njk" %}
{% include "includes/exit-home.njk" %}
{% include "includes/exit-measures.njk" %}
{% include "includes/exit-dashboard.njk" %}

<script src="/scripts/main.min.js"></script>
<script>
  jQuery.noConflict();

  (function($) {

    // -------------------------------------------------------------------------
    // Handle form validation
    // -------------------------------------------------------------------------
    $("#t4tb").parsley()

      // Prevent form submission (for development only)
      // .on('form:submit', function() {
      //   console.log('NOT SUBMITTING');
      //   return false;
      // })

      // Toggles .hidden and .disabled classes on error messages
      // and submit button if field validation has errors
      .on('field:validated', function() {
        var hasErrors = $('.parsley-error').length !== 0;

        if (hasErrors) {
          $('#form-errors').removeClass('hidden');
          $('#t4tb').find('button[type=submit]').addClass('disabled');
        } else {
          $('#form-errors').addClass('hidden');
          $('#t4tb').find('button[type=submit]').removeClass('disabled');
        }
      });
  })(jQuery);
</script>
</body>
</html>
